A magician has various spells.

You are given an array power, where each element represents the damage of a spell. Multiple spells can have the same damage value.

It is a known fact that if a magician decides to cast a spell with a damage of power[i], they cannot cast any spell with a damage of power[i] - 2, power[i] - 1, power[i] + 1, or power[i] + 2.

Each spell can be cast only once.

Return the maximum possible total damage that a magician can cast.

 

Example 1:

Input: power = [1,1,3,4]

Output: 6

Explanation:

The maximum possible damage of 6 is produced by casting spells 0, 1, 3 with damage 1, 1, 4.

Example 2:

Input: power = [7,1,6,6]

Output: 13

Explanation:

The maximum possible damage of 13 is produced by casting spells 1, 2, 3 with damage 1, 6, 6.

 

Constraints:

1 <= power.length <= 105
1 <= power[i] <= 109
 



-----------------------------------------------------------------------------



class Solution {
    public long maximumTotalDamage(int[] power) {
        Arrays.sort(power);
        HashMap<Integer, Long> map = new HashMap<>();
        List<Integer> unique = new ArrayList<>();
        for(int nums : power) {
            map.put(nums, map.getOrDefault(nums,0L) + 1);
            if(unique.size() == 0 || unique.get(unique.size()-1) != nums)
                unique.add(nums);
        }
        int n = unique.size();
        long[] dp = new long[n];
        dp[0] = unique.get(0) * map.get(unique.get(0));
        for(int i=1;i<n;i++) {
            int damage = unique.get(i);
            dp[i] = Math.max(dp[i-1], damage * map.get(damage));
            if(unique.get(i) - unique.get(i-1) > 2)
                dp[i] = Math.max(dp[i], dp[i-1] + damage * map.get(damage));
            else if(i-2 >=0 && unique.get(i) - unique.get(i-2) > 2)
                dp[i] = Math.max(dp[i], dp[i-2] + damage * map.get(damage));
            else if(i-3 >=0)
                dp[i] = Math.max(dp[i], dp[i-3] + damage * map.get(damage));
        }
        return dp[n-1];
    }
}
